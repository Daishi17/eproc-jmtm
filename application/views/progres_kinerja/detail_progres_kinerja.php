<?php
$this->role_login->cek_login();
?>
<style>
    .btn-grad {
        background-image: linear-gradient(to right, #000046 0%, #1CB5E0 51%, #000046 100%)
    }

    .btn-grad {
        text-align: center;
        text-transform: uppercase;
        transition: 0.5s;
        background-size: 200% auto;
        color: white;
        box-shadow: 0 0 20px white;
    }

    .btn-grad:hover {
        background-position: right center;
        /* change the direction of the change here */
        color: #fff;
        box-shadow: 0 0 20px yellow;
        text-decoration: none;
    }


    .btn-grad2 {
        background-image: linear-gradient(to right, #ee0979 0%, #ff6a00 51%, #ee0979 100%)
    }

    .btn-grad2 {
        text-align: center;
        text-transform: uppercase;
        transition: 0.5s;
        background-size: 200% auto;
        color: white;
        box-shadow: 0 0 10px #ee0979;
        border-radius: 5px;
    }

    .btn-grad2:hover {
        background-position: right center;
        /* change the direction of the change here */
        color: #fff;
        box-shadow: 0 0 10px yellow;
        text-decoration: none;
    }

    .btn-grad3 {
        background-image: linear-gradient(to right, #1D976C 0%, #93F9B9 51%, #1D976C 100%)
    }

    .btn-grad3 {
        text-align: center;
        text-transform: uppercase;
        transition: 0.5s;
        background-size: 200% auto;
        color: white;
        box-shadow: 0 0 10px #1D976C;
        border-radius: 5px;
        display: block;
    }

    .btn-grad3:hover {
        background-position: right center;
        /* change the direction of the change here */
        color: #fff;
        box-shadow: 0 0 10px yellow;
        text-decoration: none;
    }

    .btn-grad4 {
        background-image: linear-gradient(to right, #000428 0%, #004e92 51%, #000428 100%);
        margin: 2px;
        text-align: center;
        text-transform: uppercase;
        transition: 0.5s;
        background-size: 200% auto;
        color: white;
        box-shadow: 0 0 20px #eee;
        border-radius: 30px;
        display: block;
    }

    .btn-grad4:hover {
        background-position: right center;
        /* change the direction of the change here */
        color: #fff;
        text-decoration: none;
    }

    .btn-grad5 {
        width: 100%;
        background-image: linear-gradient(to right, #000046 0%, #1CB5E0 51%, #000046 100%);
        text-transform: uppercase;
        transition: 0.5s;
        background-size: 200% auto;
        color: white;
        box-shadow: 0 0 40px #eee;
        border-radius: 10px;
    }

    .btn-grad5:hover {
        background-position: right center;
        /* change the direction of the change here */
        color: #fff;
        box-shadow: 0 0 40px #1CB5E0;
        text-decoration: none;
    }

    .btn-grad6 {
        width: 100%;
        background-image: linear-gradient(to right, #000046 0%, #1CB5E0 51%, #000046 100%);
        text-transform: uppercase;
        transition: 0.5s;
        background-size: 200% auto;
        color: white;
        box-shadow: 0 0 40px #eee;
    }

    .btn-grad6:hover {
        background-position: right center;
        /* change the direction of the change here */
        color: #fff;
        box-shadow: 0 0 10px yellow;
        text-decoration: none;
    }


    .btn-grad7 {
        background-image: linear-gradient(to right, #00d2ff 0%, #3a7bd5 51%, #00d2ff 100%)
    }

    .btn-grad7 {
        text-transform: uppercase;
        transition: 0.5s;
        background-size: 200% auto;
        color: white;
        box-shadow: 0 0 20px #eee;
    }

    .btn-grad7:hover {
        background-position: right center;
        /* change the direction of the change here */
        color: #00d2ff;
        text-decoration: none;
        box-shadow: 0 0 40px #00d2ff;
    }


    .btn-grad8 {
        background-image: linear-gradient(to right, #1D976C 0%, #93F9B9 51%, #1D976C 100%)
    }

    .btn-grad8 {
        text-transform: uppercase;
        transition: 0.5s;
        background-size: 200% auto;
        color: white;
        box-shadow: 0 0 20px #eee;

    }

    .btn-grad8:hover {
        background-position: right center;
        /* change the direction of the change here */
        color: #1D976C;
        text-decoration: none;
        box-shadow: 0 0 40px #1D976C;
    }

    .btn-grad9 {
        background-image: linear-gradient(to right, #ee0979 0%, #ff6a00 51%, #ee0979 100%)
    }

    .btn-grad9 {

        text-transform: uppercase;
        transition: 0.5s;
        background-size: 200% auto;
        color: white;
        box-shadow: 0 0 20px #eee;

    }

    .btn-grad9:hover {
        background-position: right center;
        /* change the direction of the change here */
        color: #ee0979;
        text-decoration: none;
        box-shadow: 0 0 40px #ee0979;
    }

    .btn-grad10 {
        background-image: linear-gradient(to right, #ce150f 20%, #ff6a00 51%, #cf2323 100%)
    }

    .btn-grad10 {

        text-transform: uppercase;
        transition: 0.5s;
        background-size: 200% auto;
        color: white;
        box-shadow: 0 0 20px #eee;

    }

    .btn-grad10:hover {
        background-position: right center;
        /* change the direction of the change here */
        color: #F7971E;
        text-decoration: none;
        box-shadow: 0 0 40px #F7971E;
    }

    .btn-grad20 {
        width: 100%;
        background-image: linear-gradient(to right, #2C3E50 0%, #FD746C 51%, #2C3E50 100%)
    }

    .btn-grad20 {
        text-transform: uppercase;
        transition: 0.5s;
        background-size: 200% auto;
        color: white;
        box-shadow: 0 0 20px #eee;
    }

    .btn-grad20:hover {
        background-position: right center;
        /* change the direction of the change here */
        color: #fff;
        box-shadow: 0 0 40px #FD746C;
        text-decoration: none;
    }

    .btn-grad21 {
        width: 100%;
        background-image: linear-gradient(to right, #C02425 0%, #F0CB35 51%, #C02425 100%)
    }

    .btn-grad21 {
        text-transform: uppercase;
        transition: 0.5s;
        background-size: 200% auto;
        color: white;
        box-shadow: 0 0 20px #eee;
        border-radius: 10px;
    }

    .btn-grad21:hover {
        background-position: right center;
        /* change the direction of the change here */
        color: #fff;
        box-shadow: 0 0 40px #F0CB35;
        text-decoration: none;
    }

    .btn-grad100 {
        background-image: linear-gradient(to right, #ee0979 0%, #ff6a00 51%, #ee0979 100%)
    }

    .btn-grad100 {
        text-transform: uppercase;
        transition: 0.5s;
        background-size: 200% auto;
        color: white;
        box-shadow: 0 0 20px #eee;
    }

    .btn-grad100:hover {
        background-position: right center;
        color: #fff;
        box-shadow: 0 0 30px #ee0979;
        text-decoration: none;
    }

    .btn-grad101 {
        background-image: linear-gradient(to right, #ee0979 0%, #ff6a00 51%, #ee0979 100%)
    }

    .act-btn {
        display: block;
        width: 400px;
        height: 100px;
        line-height: 50px;
        text-align: center;
        color: white;
        font-size: 30px;
        font-weight: bold;
        text-decoration: none;
        transition: ease all 0.3s;
        position: fixed;
        bottom: 30px;
        bottom: 30px;
    }

    .btn-grad101 {
        width: 30px;
        height: 30px;
        text-transform: uppercase;
        transition: 0.5s;
        background-size: 200% auto;
        color: white;
        box-shadow: 0 0 20px #eee;
        border-radius: 5px;
        display: block;
        border: none;
    }

    .btn-grad101:hover {
        background-position: right center;
        color: #fff;
        box-shadow: 0 0 30px #ee0979;
        text-decoration: none;
    }
</style>
<style>
    #kirim_ke_vendor {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 9999;
        background-color: #fff;
    }

    #kirim_ke_vendor #dikirim_ke_vendor {
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        font: 14px arial;
    }
</style>
<div id="kirim_ke_vendor" style="display: none;">
    <div id="dikirim_ke_vendor">
        <img src="<?= base_url('assets/img/info_penyedia.gif') ?>" width="100%">
    </div>
</div>
<div class="preloader">
    <div class="loading">
        <img src="<?= base_url('assets/img/palsewait.gif') ?>" width="100%">
    </div>
</div>
<input type="hidden" name="id_paket" id="id_paket_vendor" value="<?= $data_pemenang['id_paket'] ?>">
<div class="container">
    <form action="" id="form_selesai_tender">
        <input type="hidden" name="id_paket" value="<?= $data_pemenang['id_paket'] ?>">
        <input type="hidden" name="id_vendor" value="<?= $data_pemenang['id_vendor'] ?>">
    </form>

    <input type="hidden" name="id_paket" id="id_paket" value="<?= $data_pemenang['id_paket'] ?>">
    <div class="card mt-5" style="box-shadow: 2px 2px 10px 2px black;">
        <div class="card-header btn-grad text-white"><b> <i class="fas fa-clock"></i> Timline Progres Pekerjaan Paket <?= $data_pemenang['nama_paket'] ?> </b></div>
        <div class="card-body">
            <div style="overflow-x:auto">
                <table class="table" style="font-size: 12px;">
                    <tr>
                        <th>Kode Tender</th>
                        <th>: <?= $data_pemenang['kode_tender'] ?></th>
                    </tr>
                    <tr>
                        <th>Nama Paket</th>
                        <th>: <?= $data_pemenang['nama_paket'] ?></th>
                    </tr>
                    <tr>
                        <th>Divisi</th>
                        <th>: <?= $data_pemenang['nama_unit_kerja'] ?></th>
                    </tr>
                    <tr>
                        <th>Nama Vendor</th>
                        <th>: <?= $data_pemenang['username_vendor'] ?></th>
                    </tr>
                    <tr>
                        <th>Alamat Perusahaan</th>
                        <?php if ($data_pemenang['alamat_vendor'] == null) { ?>
                            <th>: <?= $data_pemenang['alamat_usaha'] ?></th>
                        <?php  } else { ?>
                            <th>: <?= $data_pemenang['alamat_vendor'] ?></th>
                        <?php } ?>
                    </tr>
                    <?php $no = 1;
                    foreach ($lokasi_kerja as $key => $value) { ?>
                        <tr>
                            <th>Lokasi Pekerjaan <?= $no++ ?></th>
                            <th>: Provinsi : <?= $value['nama_provinsi'] ?>
                                <br> : Kabupaten : <?= $value['nama_kabupaten'] ?>
                                <br> : Alamat : <?= $value['detail_lokasi'] ?>
                            </th>
                        </tr>
                    <?php } ?>
                    <tr>
                        <th>Nilai Kontrak</th>
                        <th>: <?= "Rp " . number_format($data_pemenang['negosiasi'], 2, ',', '.') ?></th>
                    </tr>
                    <tr>
                        <th>Metode Pemilihan</th>
                        <th>: <?= $data_pemenang['nama_metode_pemilihan'] ?></th>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <br><br>
    <div class="card" style="box-shadow: 2px 2px 10px 2px black;">
        <div class="card-header btn-grad text-white">
            Persentase Progres Pengerjaan - Selesai Penngerjaan (%)
        </div>
        <div class="card-body">
            <div class="progress">
                <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                </div>
            </div>
            <center>
                <br>
                <button class="angga" style="border-radius: 20px;" for="" style="font-size: 20px;" id="nilai_prsenteasi"></label>
            </center>
        </div>
    </div>
    <br><br>

    <div class="card" style="box-shadow: 2px 2px 10px 2px black;">
        <div class="card-header btn-grad text-white">
            Timeline Laporan <i class="fas fa fa-clock"></i>
        </div>
        <div class="card-body">
            <h2 class="text-center py-3">TIMELINE LAPORAN PEKERJAAN</h2>
            <br>
            <?php if ($total_presentasi['persen_progres'] == 100) { ?>
                <?php if ($data_pemenang['tahap_selesai_dikerjakan_tender'] == 1) { ?>
                    <div class="float-left">
                        <button class="btn btn-grad10 text-white"><i class="fas fa fa-check"></i> Anda Sudah Menyetujui Penyelesaian Tender</button><br>
                    </div>
                    <br><br>
                    <br><br>
                <?php } else { ?>
                    <div class="float-left">
                        <button class="btn btn-grad8 text-white" onclick="selesai_progres_tender()"><i class="fas fa fa-check"></i> Setujui Progres Selesai</button><br>
                        <small><i class="text-danger">Nilia Progres Pekerjaan Sudah Mencapai 100% </i></small><br>
                        <small><i class="text-danger">Klik Button Setuju Bila Anda Menyatakan Progres Sudah Selesai Jika Belum<br>Anda Dapat Memberikan Komentar</i></small>
                    </div>
                    <br><br>
                    <br><br>
                <?php } ?>
            <?php } ?>

            <!-- <a href="javascript" class="btn btn-sm btn-grad text-white" data-toggle="modal" data-target="#tambah_laporan"> + Buat Laporan</a> -->
            <div class="container py-2 mt-4 mb-4">
                <div id="load_data_progres"></div>
            </div>
        </div>
    </div>
    <a href="#" id="tombol_presentase" class="act-btn" style="display: none;">
        <div class="progress">
            <div class="progress-bar progress-bar-striped active progress-bar-animated" role="progressbar" aria-valuemin="0" aria-valuemax="100">
            </div>
        </div>
    </a>
</div>

<!-- Modal komentar-->
<div class="modal fade" id="modal_komentar" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header btn-grad">
                <h5 class="modal-title" id="exampleModalLongTitle">Berikan Komentar Pada Progres Ini</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form action="" id="form_komentar">
                    <input type="hidden" name="id_progres_pekerjaan_tender" id="id_progres_pekerjaan_tender">
                    <div class="form-group">
                        <label for="">Berikan Komentar</label>
                        <textarea name="alasan_progres" class="form-control form-control-sm" id="alasan_progres" cols="30" rows="5"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal"><i class="fas fa fa-ban"></i> Batal</button>
                <button type="submit" onclick="Kirim_komentar()" class="btn btn-success"><i class="far fa-paper-plane"></i> Kirim Komentar</button>
            </div>
        </div>
    </div>
</div>